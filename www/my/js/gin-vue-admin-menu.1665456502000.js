/*! 
 Build based on gin-vue-admin 
 Time : 1665456502000 */
var e=Object.defineProperty,l=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,n=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,u=(e,l,a)=>new Promise(((t,n)=>{var u=e=>{try{i(a.next(e))}catch(l){n(l)}},o=e=>{try{i(a.throw(e))}catch(l){n(l)}},i=e=>e.done?t(e.value):Promise.resolve(e.value).then(u,o);i((a=a.apply(e,l)).next())}));import{_ as o,u as i,b as d,r,c as m,o as p,d as s,e as c,f as v,h as f,m as b,t as h,g as y,j as g,l as w,k as V,a3 as _,X as k,a4 as I,p as D,a5 as x,a6 as U,a7 as N}from"../gva/gin-vue-admin-index.1665456502000.js";import C from"./gin-vue-admin-icon.1665456502000.js";import{W as M}from"./gin-vue-admin-warningBar.1665456502000.js";import{c as z}from"./gin-vue-admin-authorityBtn.1665456502000.js";const P={class:"gva-table-box"},S={class:"gva-btn-list"},B={class:"icon-column"},j={style:{display:"inline-flex"}},T={style:{"font-size":"12px","margin-right":"12px"}},A={class:"dialog-footer"},q={name:"Menus"};var O=o(Object.assign(q,{setup(e){const{t:o}=i(),q=d({path:[{required:!0,message:o("menu.enterMenuNameNote"),trigger:"blur"}],component:[{required:!0,message:o("menu.enterFilePathNote"),trigger:"blur"}],"meta.title":[{required:!0,message:o("menu.enterMenuDisplayNameNote"),trigger:"blur"}]}),O=r(1),F=r(0),E=r(999),K=r([]),R=r({}),$=()=>u(this,null,(function*(){const e=yield _(((e,u)=>{for(var o in u||(u={}))a.call(u,o)&&n(e,o,u[o]);if(l)for(var o of l(u))t.call(u,o)&&n(e,o,u[o]);return e})({page:O.value,pageSize:E.value},R.value));0===e.code&&(K.value=e.data.list,F.value=e.data.total,O.value=e.data.page,E.value=e.data.pageSize)}));$();const H=(e,l)=>u(this,null,(function*(){const a=e[l];if(0===a.ID)return void e.splice(l,1);0!==(yield z({id:a.ID})).code||e.splice(l,1)})),W=r({ID:0,path:"",name:"",hidden:"",parentId:"",component:"",meta:{title:"",icon:"",defaultMenu:!1,closeTab:!1,keepAlive:!1},parameters:[],menuBtn:[]}),X=()=>{W.value.path=W.value.name},G=e=>{Y(),e()},J=e=>{k.confirm(o("menu.deleteAllRolesConfirm"),o("general.hint"),{confirmButtonText:o("general.confirm"),cancelButtonText:o("general.cancel"),type:"warning"}).then((()=>u(this,null,(function*(){0===(yield I({ID:e})).code&&(D({type:"success",message:o("general.deleteSuccess")}),1===K.value.length&&O.value>1&&O.value--,$())})))).catch((()=>{D({type:"info",message:o("general.undeleted")})}))},L=r(null),Q=r(!1),Y=()=>{Q.value=!1,L.value.resetFields(),W.value={ID:0,path:"",name:"",hidden:"",parentId:"",component:"",meta:{title:"",icon:"",defaultMenu:!1,keepAlive:""}}},Z=r(!1),ee=()=>{Y(),Z.value=!1},le=()=>u(this,null,(function*(){L.value.validate((e=>u(this,null,(function*(){if(e){let e;e=ue.value?yield x(W.value):yield U(W.value),0===e.code&&(D({type:"success",message:ue.value?o("general.editSuccess"):o("general.addSuccess")}),$()),Y(),Z.value=!1}}))))})),ae=r([{ID:"0",title:o("menu.rootMenu")}]),te=()=>{ae.value=[{ID:"0",title:o("menu.rootDirctory")}],ne(K.value,ae.value,!1)},ne=(e,l,a)=>{e&&e.forEach((e=>{if(e.children&&e.children.length){const t={title:e.meta.title,ID:String(e.ID),disabled:a||e.ID===W.value.ID,children:[]};ne(e.children,t.children,a||e.ID===W.value.ID),l.push(t)}else{const t={title:e.meta.title,ID:String(e.ID),disabled:a||e.ID===W.value.ID};l.push(t)}}))},ue=r(!1),oe=r(o("menu.addMenu")),ie=e=>{oe.value=o("menu.addMenu"),W.value.parentId=String(e),ue.value=!1,te(),Z.value=!0},de=e=>u(this,null,(function*(){oe.value=o("menu.editMenu");const l=yield N({id:e});W.value=l.data.menu,ue.value=!0,te(),Z.value=!0}));return(e,l)=>{const a=m("el-button"),t=m("el-table-column"),n=m("el-icon"),u=m("el-table"),i=m("el-input"),d=m("el-form-item"),r=m("el-checkbox"),_=m("el-option"),k=m("el-select"),I=m("el-cascader"),D=m("el-form"),x=m("el-dialog");return p(),s("div",null,[c("div",P,[c("div",S,[v(a,{size:"mini",type:"primary",icon:"plus",onClick:l[0]||(l[0]=e=>ie("0"))},{default:f((()=>[b(h(y(o)("menu.addRootMenu")),1)])),_:1})]),v(u,{data:K.value,"row-key":"ID"},{default:f((()=>[v(t,{align:"left",label:"ID","min-width":"100",prop:"ID"}),v(t,{align:"left",label:y(o)("menu.routeName"),"show-overflow-tooltip":"","min-width":"160",prop:"name"},null,8,["label"]),v(t,{align:"left",label:y(o)("menu.routePath"),"show-overflow-tooltip":"","min-width":"160",prop:"path"},null,8,["label"]),v(t,{align:"left",label:y(o)("menu.visibility"),"min-width":"100",prop:"hidden"},{default:f((e=>[c("span",null,h(e.row.hidden?y(o)("menu.hide"):y(o)("menu.show")),1)])),_:1},8,["label"]),v(t,{align:"left",label:y(o)("menu.parent"),"min-width":"90",prop:"parentId"},null,8,["label"]),v(t,{align:"left",label:y(o)("menu.sort"),"min-width":"70",prop:"sort"},null,8,["label"]),v(t,{align:"left",label:y(o)("menu.filePath"),"min-width":"360",prop:"component"},null,8,["label"]),v(t,{align:"left",label:y(o)("menu.displayName"),"min-width":"120",prop:"authorityName"},{default:f((e=>[c("span",null,h(e.row.meta.title),1)])),_:1},8,["label"]),v(t,{align:"left",label:y(o)("menu.icon"),"min-width":"140",prop:"authorityName"},{default:f((e=>[c("div",B,[v(n,null,{default:f((()=>[(p(),g(w(e.row.meta.icon)))])),_:2},1024),c("span",null,h(e.row.meta.icon),1)])])),_:1},8,["label"]),v(t,{align:"left",fixed:"right",label:y(o)("general.operations"),width:"300"},{default:f((e=>[v(a,{size:"mini",type:"text",icon:"plus",onClick:l=>ie(e.row.ID)},{default:f((()=>[b(h(y(o)("menu.addSubMenu")),1)])),_:2},1032,["onClick"]),v(a,{size:"mini",type:"text",icon:"edit",onClick:l=>de(e.row.ID)},{default:f((()=>[b(h(y(o)("general.edit")),1)])),_:2},1032,["onClick"]),v(a,{size:"mini",type:"text",icon:"delete",onClick:l=>J(e.row.ID)},{default:f((()=>[b(h(y(o)("general.delete")),1)])),_:2},1032,["onClick"])])),_:1},8,["label"])])),_:1},8,["data"])]),v(x,{modelValue:Z.value,"onUpdate:modelValue":l[14]||(l[14]=e=>Z.value=e),"before-close":G,title:oe.value,width:"800px"},{footer:f((()=>[c("div",A,[v(a,{size:"small",onClick:ee},{default:f((()=>[b(h(y(o)("general.cancel")),1)])),_:1}),v(a,{size:"small",type:"primary",onClick:le},{default:f((()=>[b(h(y(o)("general.confirm")),1)])),_:1})])])),default:f((()=>[v(M,{title:y(o)("menu.newMenuNote")},null,8,["title"]),Z.value?(p(),g(D,{key:0,ref_key:"menuForm",ref:L,inline:!0,model:W.value,rules:y(q),"label-position":"top","label-width":"100px"},{default:f((()=>[v(d,{label:y(o)("menu.routeName"),prop:"path",style:{width:"30%"}},{default:f((()=>[v(i,{modelValue:W.value.name,"onUpdate:modelValue":l[1]||(l[1]=e=>W.value.name=e),autocomplete:"off",placeholder:y(o)("menu.routeNameNote"),onChange:X},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),v(d,{prop:"path",style:{width:"30%"}},{label:f((()=>[c("div",j,[b(h(y(o)("menu.routePath"))+" ",1),v(r,{modelValue:Q.value,"onUpdate:modelValue":l[2]||(l[2]=e=>Q.value=e),style:{float:"right","margin-left":"20px"}},{default:f((()=>[b(h(y(o)("menu.addParameter")),1)])),_:1},8,["modelValue"])])])),default:f((()=>[v(i,{modelValue:W.value.path,"onUpdate:modelValue":l[3]||(l[3]=e=>W.value.path=e),disabled:!Q.value,autocomplete:"off",placeholder:y(o)("menu.routePathNote")},null,8,["modelValue","disabled","placeholder"])])),_:1}),v(d,{label:y(o)("menu.visibility"),style:{width:"20%"}},{default:f((()=>[v(k,{modelValue:W.value.hidden,"onUpdate:modelValue":l[4]||(l[4]=e=>W.value.hidden=e),placeholder:y(o)("menu.visibilityNote")},{default:f((()=>[v(_,{value:!1,label:y(o)("general.no")},null,8,["label"]),v(_,{value:!0,label:y(o)("general.yes")},null,8,["label"])])),_:1},8,["modelValue","placeholder"])])),_:1},8,["label"]),v(d,{label:y(o)("menu.parentId"),style:{width:"30%"}},{default:f((()=>[v(I,{modelValue:W.value.parentId,"onUpdate:modelValue":l[5]||(l[5]=e=>W.value.parentId=e),style:{width:"100%"},disabled:!ue.value,options:ae.value,props:{checkStrictly:!0,label:"title",value:"ID",disabled:"disabled",emitPath:!1},"show-all-levels":!1,filterable:""},null,8,["modelValue","disabled","options"])])),_:1},8,["label"]),v(d,{label:y(o)("menu.filePath"),prop:"component",style:{width:"60%"}},{default:f((()=>[v(i,{modelValue:W.value.component,"onUpdate:modelValue":l[6]||(l[6]=e=>W.value.component=e),autocomplete:"off"},null,8,["modelValue"]),c("span",T,h(y(o)("menu.subMenuNote")),1),v(a,{size:"mini",onClick:l[7]||(l[7]=e=>W.value.component="view/routerHolder.vue")},{default:f((()=>[b(h(y(o)("menu.clickMe")),1)])),_:1})])),_:1},8,["label"]),v(d,{label:y(o)("menu.displayName"),prop:"meta.title",style:{width:"30%"}},{default:f((()=>[v(i,{modelValue:W.value.meta.title,"onUpdate:modelValue":l[8]||(l[8]=e=>W.value.meta.title=e),autocomplete:"off"},null,8,["modelValue"])])),_:1},8,["label"]),v(d,{label:y(o)("menu.icon"),prop:"meta.icon",style:{width:"30%"}},{default:f((()=>[v(C,{meta:W.value.meta,style:{width:"100%"}},null,8,["meta"])])),_:1},8,["label"]),v(d,{label:y(o)("general.order"),prop:"sort",style:{width:"30%"}},{default:f((()=>[v(i,{modelValue:W.value.sort,"onUpdate:modelValue":l[9]||(l[9]=e=>W.value.sort=e),modelModifiers:{number:!0},autocomplete:"off"},null,8,["modelValue"])])),_:1},8,["label"]),v(d,{label:"KeepAlive",prop:"meta.keepAlive",style:{width:"30%"}},{default:f((()=>[v(k,{modelValue:W.value.meta.keepAlive,"onUpdate:modelValue":l[10]||(l[10]=e=>W.value.meta.keepAlive=e),style:{width:"100%"},placeholder:y(o)("menu.keepAliveNote")},{default:f((()=>[v(_,{value:!1,label:y(o)("general.no")},null,8,["label"]),v(_,{value:!0,label:y(o)("general.yes")},null,8,["label"])])),_:1},8,["modelValue","placeholder"])])),_:1}),v(d,{label:"CloseTab",prop:"meta.closeTab",style:{width:"30%"}},{default:f((()=>[v(k,{modelValue:W.value.meta.closeTab,"onUpdate:modelValue":l[11]||(l[11]=e=>W.value.meta.closeTab=e),style:{width:"100%"},placeholder:y(o)("menu.closeTabNote")},{default:f((()=>[v(_,{value:!1,label:y(o)("general.no")},null,8,["label"]),v(_,{value:!0,label:y(o)("general.yes")},null,8,["label"])])),_:1},8,["modelValue","placeholder"])])),_:1})])),_:1},8,["model","rules"])):V("",!0),c("div",null,[v(a,{size:"small",type:"primary",icon:"edit",onClick:l[12]||(l[12]=e=>{return(l=W.value).parameters||(l.parameters=[]),void l.parameters.push({type:"query",key:"",value:""});var l})},{default:f((()=>[b(h(y(o)("menu.addMenuParameters")),1)])),_:1}),v(u,{data:W.value.parameters,style:{width:"100%"}},{default:f((()=>[v(t,{align:"left",prop:"type",label:y(o)("menu.parameterType"),width:"180"},{default:f((e=>[v(k,{modelValue:e.row.type,"onUpdate:modelValue":l=>e.row.type=l,placeholder:y(o)("general.pleaseSelect")},{default:f((()=>[v(_,{key:"query",value:"query",label:"query"}),v(_,{key:"params",value:"params",label:"params"})])),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])])),_:1},8,["label"]),v(t,{align:"left",prop:"key",label:y(o)("menu.paremeterKey"),width:"180"},{default:f((e=>[c("div",null,[v(i,{modelValue:e.row.key,"onUpdate:modelValue":l=>e.row.key=l},null,8,["modelValue","onUpdate:modelValue"])])])),_:1},8,["label"]),v(t,{align:"left",prop:"value",label:y(o)("menu.parameterValue")},{default:f((e=>[c("div",null,[v(i,{modelValue:e.row.value,"onUpdate:modelValue":l=>e.row.value=l},null,8,["modelValue","onUpdate:modelValue"])])])),_:1},8,["label"]),v(t,{align:"left"},{default:f((e=>[c("div",null,[v(a,{type:"danger",size:"small",icon:"delete",onClick:l=>{return a=W.value.parameters,t=e.$index,void a.splice(t,1);var a,t}},{default:f((()=>[b(h(y(o)("general.delete")),1)])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"]),v(a,{style:{"margin-top":"12px"},size:"small",type:"primary",icon:"edit",onClick:l[13]||(l[13]=e=>{return l=W.value,console.log(l),l.menuBtn||(l.menuBtn=[]),void l.menuBtn.push({name:"",desc:""});var l})},{default:f((()=>[b(h(y(o)("menu.addButton")),1)])),_:1}),v(u,{data:W.value.menuBtn,style:{width:"100%"}},{default:f((()=>[v(t,{align:"left",prop:"name",label:y(o)("menu.buttonName"),width:"180"},{default:f((e=>[c("div",null,[v(i,{modelValue:e.row.name,"onUpdate:modelValue":l=>e.row.name=l},null,8,["modelValue","onUpdate:modelValue"])])])),_:1},8,["label"]),v(t,{align:"left",prop:"name",label:y(o)("menu.comments"),width:"180"},{default:f((e=>[c("div",null,[v(i,{modelValue:e.row.desc,"onUpdate:modelValue":l=>e.row.desc=l},null,8,["modelValue","onUpdate:modelValue"])])])),_:1},8,["label"]),v(t,{align:"left"},{default:f((e=>[c("div",null,[v(a,{type:"danger",size:"small",icon:"delete",onClick:l=>H(W.value.menuBtn,e.$index)},{default:f((()=>[b(h(y(o)("general.delete")),1)])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"])])])),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-3fc25aea"]]);export{O as default};
