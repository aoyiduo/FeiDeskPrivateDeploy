/*! 
 Build based on gin-vue-admin 
 Time : 1654909025000 */
!function(){function e(e,t,n,r,u,a,o){try{var c=e[a](o),i=c.value}catch(s){return void n(s)}c.done?t(i):Promise.resolve(i).then(r,u)}function t(t){return function(){var n=this,r=arguments;return new Promise((function(u,a){var o=t.apply(n,r);function c(t){e(o,u,a,c,i,"next",t)}function i(t){e(o,u,a,c,i,"throw",t)}c(void 0)}))}}var n=document.createElement("style");n.innerHTML=".custom-tree-node span+span{margin-left:12px}\n",document.head.appendChild(n),System.register(["../gva/gin-vue-admin-index-legacy.1654909025000.js","./gin-vue-admin-authority-legacy.16549090250002.js","./gin-vue-admin-authorityBtn-legacy.1654909025000.js"],(function(e){"use strict";var n,r,u,a,o,c,i,s,l,d,f,m,p,v,h,y,g,w,k,x,I;return{setters:[function(e){n=e.u,r=e.r,u=e.c,a=e.o,o=e.d,c=e.e,i=e.f,s=e.h,l=e.m,d=e.t,f=e.g,m=e.J,p=e.k,v=e.a0,h=e.a1,y=e.p,g=e.a2,w=e.G},function(e){k=e.u},function(e){x=e.g,I=e.s}],execute:function(){var R={class:"clearflex"},b={class:"custom-tree-node"},C={key:0},_=l(" 分配按钮 "),D={class:"dialog-footer"},S={name:"Menus"};e("default",Object.assign(S,{props:{row:{default:function(){return{}},type:Object}},emits:["changeRow"],setup:function(e,S){var j=S.expose,z=S.emit,N=e,A=n().t,E=r([]),B=r([]),T=r(!1),V=r({children:"children",label:function(e){return e.meta.title}}),H=function(){var e=t(regeneratorRuntime.mark((function e(){var t,n,r,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:return t=e.sent,E.value=t.data.menus,e.next=6,h({authorityId:N.row.authorityId});case 6:n=e.sent,r=n.data.menus,u=[],r.forEach((function(e){r.some((function(t){return t.parentId===e.menuId}))||u.push(Number(e.menuId))})),B.value=u;case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();H();var M=function(){var e=t(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k({authorityId:N.row.authorityId,AuthorityName:N.row.authorityName,parentId:N.row.parentId,defaultRouter:t.name});case 2:0===(n=e.sent).code&&(y({type:"success",message:A("general.setupSuccess")}),z("changeRow","defaultRouter",n.data.authority.defaultRouter));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){T.value=!0},P=r(null),G=function(){var e=t(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=P.value.getCheckedNodes(!1,!0),e.next=3,g({menus:t,authorityId:N.row.authorityId});case 3:0===e.sent.code&&y({type:"success",message:A("menus.menuSetupSuccess")});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();j({enterAndNext:function(){G()},needConfirm:T});var J=r(!1),L=r([]),U=r([]),q=r(),F="",K=function(){var e=t(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F=t.ID,e.next=3,x({menuID:F,authorityId:N.row.authorityId});case 3:if(0!==(n=e.sent).code){e.next=9;break}return W(t),e.next=8,w();case 8:n.data.selected&&n.data.selected.forEach((function(e){L.value.some((function(t){t.ID===e&&q.value.toggleRowSelection(t,!0)}))}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(e){U.value=e},W=function(e){J.value=!0,L.value=e.menuBtn},X=function(){J.value=!1},Y=function(){var e=t(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=U.value.map((function(e){return e.ID})),e.next=3,I({menuID:F,selected:t,authorityId:N.row.authorityId});case 3:0===e.sent.code&&(y({type:"success",message:"设置成功"}),J.value=!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return function(t,n){var r=u("el-button"),v=u("el-tree"),h=u("el-table-column"),y=u("el-table"),g=u("el-dialog");return a(),o("div",null,[c("div",R,[i(r,{class:"fl-right",size:"mini",type:"primary",onClick:G},{default:s((function(){return[l(d(f(A)("general.confirm")),1)]})),_:1})]),i(v,{ref_key:"menuTree",ref:P,data:E.value,"default-checked-keys":B.value,props:V.value,"default-expand-all":"","highlight-current":"","node-key":"ID","show-checkbox":"",onCheck:O},{default:s((function(t){var n=t.node,u=t.data;return[c("span",b,[c("span",null,d(n.label),1),c("span",null,[i(r,{type:"text",size:"mini",style:m({color:e.row.defaultRouter===u.name?"#E6A23C":"#85ce61"}),disabled:!n.checked,onClick:function(){return M(u)}},{default:s((function(){return[l(d(e.row.defaultRouter===u.name?f(A)("menus.home"):f(A)("menus.setAsHome")),1)]})),_:2},1032,["style","disabled","onClick"])]),u.menuBtn.length?(a(),o("span",C,[i(r,{type:"text",size:"small",onClick:function(){return K(u)}},{default:s((function(){return[_]})),_:2},1032,["onClick"])])):p("",!0)])]})),_:1},8,["data","default-checked-keys","props"]),i(g,{modelValue:J.value,"onUpdate:modelValue":n[0]||(n[0]=function(e){return J.value=e}),title:"分配按钮","destroy-on-close":""},{footer:s((function(){return[c("div",D,[i(r,{size:"small",onClick:X},{default:s((function(){return[l(d(f(A)("general.close")),1)]})),_:1}),i(r,{size:"small",type:"primary",onClick:Y},{default:s((function(){return[l(d(f(A)("general.confirm")),1)]})),_:1})])]})),default:s((function(){return[i(y,{ref_key:"btnTableRef",ref:q,data:L.value,"row-key":"ID",onSelectionChange:Q},{default:s((function(){return[i(h,{type:"selection",width:"55"}),i(h,{label:"按钮名称",prop:"name"}),i(h,{label:"按钮备注",prop:"desc"})]})),_:1},8,["data"])]})),_:1},8,["modelValue"])])}}}))}}}))}();
