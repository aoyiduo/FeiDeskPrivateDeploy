/*! 
 Build based on gin-vue-admin 
 Time : 1654909673000 */
var e=Object.defineProperty,l=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,r=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,o=(e,l,a)=>new Promise(((t,r)=>{var o=e=>{try{n(a.next(e))}catch(l){r(l)}},i=e=>{try{n(a.throw(e))}catch(l){r(l)}},n=e=>e.done?t(e.value):Promise.resolve(e.value).then(o,i);n((a=a.apply(e,l)).next())}));import{W as i,u as n,r as s,c as u,o as d,d as p,e as c,f as v,h as g,g as f,m,t as y,j as h,p as b}from"../gva/gin-vue-admin-index.1654909673000.js";import{f as w}from"./gin-vue-admin-format.1654909673000.js";import"./gin-vue-admin-dictionary.1654909673000.js";import"./gin-vue-admin-sysDictionary.1654909673000.js";const _={class:"gva-search-box"},O={class:"gva-table-box"},C={class:"gva-btn-list"},k={style:{"text-align":"right","margin-top":"8px"}},R={class:"popover-box"},x={key:1},z={class:"popover-box"},S={key:1},j={style:{"text-align":"right","margin-top":"8px"}},V={class:"gva-pagination"},P={name:"SysOperationRecord"},I=Object.assign(P,{setup(e){const{t:P}=n(),I=s(1),q=s(0),U=s(10),D=s([]),N=s({}),A=()=>{N.value={}},E=()=>{I.value=1,U.value=10,""===N.value.status&&(N.value.status=null),J()},M=e=>{U.value=e,J()},B=e=>{I.value=e,J()},J=()=>o(this,null,(function*(){const e=yield(o=((e,o)=>{for(var i in o||(o={}))a.call(o,i)&&r(e,i,o[i]);if(l)for(var i of l(o))t.call(o,i)&&r(e,i,o[i]);return e})({page:I.value,pageSize:U.value},N.value),i({url:"/sysOperationRecord/getSysOperationRecordList",method:"get",params:o}));var o;0===e.code&&(D.value=e.data.list,q.value=e.data.total,I.value=e.data.page,U.value=e.data.pageSize)}));J();const L=s(!1),T=s([]),W=e=>{T.value=e},F=()=>o(this,null,(function*(){const e=[];T.value&&T.value.forEach((l=>{e.push(l.ID)}));var l;0===(yield(l={ids:e},i({url:"/sysOperationRecord/deleteSysOperationRecordByIds",method:"delete",data:l}))).code&&(b({type:"success",message:P("general.deleteSuccess")}),D.value.length===e.length&&I.value>1&&I.value--,L.value=!1,J())})),G=e=>o(this,null,(function*(){e.visible=!1;var l;0===(yield(l={ID:e.ID},i({url:"/sysOperationRecord/deleteSysOperationRecord",method:"delete",data:l}))).code&&(b({type:"success",message:P("general.deleteSuccess")}),1===D.value.length&&I.value>1&&I.value--,J())})),H=e=>{try{return JSON.parse(e)}catch(l){return e}};return(e,l)=>{const a=u("el-input"),t=u("el-form-item"),r=u("el-button"),o=u("el-form"),i=u("el-popover"),n=u("el-table-column"),s=u("el-tag"),b=u("warning"),J=u("el-icon"),K=u("el-table"),Q=u("el-pagination");return d(),p("div",null,[c("div",_,[v(o,{inline:!0,model:N.value},{default:g((()=>[v(t,{label:f(P)("view.operation.sysOperationRecord.requestMethod")},{default:g((()=>[v(a,{modelValue:N.value.method,"onUpdate:modelValue":l[0]||(l[0]=e=>N.value.method=e),placeholder:f(P)("general.searchCriteria")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),v(t,{label:f(P)("view.operation.sysOperationRecord.requestPath")},{default:g((()=>[v(a,{modelValue:N.value.path,"onUpdate:modelValue":l[1]||(l[1]=e=>N.value.path=e),placeholder:f(P)("general.searchCriteria")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),v(t,{label:f(P)("view.operation.sysOperationRecord.resultStatusCode")},{default:g((()=>[v(a,{modelValue:N.value.status,"onUpdate:modelValue":l[2]||(l[2]=e=>N.value.status=e),placeholder:f(P)("general.searchCriteria")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),v(t,null,{default:g((()=>[v(r,{size:"small",type:"primary",icon:"search",onClick:E},{default:g((()=>[m(y(f(P)("general.search")),1)])),_:1}),v(r,{size:"small",icon:"refresh",onClick:A},{default:g((()=>[m(y(f(P)("general.reset")),1)])),_:1})])),_:1})])),_:1},8,["model"])]),c("div",O,[c("div",C,[v(i,{visible:L.value,"onUpdate:visible":l[5]||(l[5]=e=>L.value=e),placement:"top",width:"160"},{reference:g((()=>[v(r,{icon:"delete",size:"small",style:{"margin-left":"10px"},disabled:!T.value.length,onClick:l[4]||(l[4]=e=>L.value=!0)},{default:g((()=>[m(y(f(P)("general.delete")),1)])),_:1},8,["disabled"])])),default:g((()=>[c("p",null,y(f(P)("general.deleteConfirm")),1),c("div",k,[v(r,{size:"small",type:"text",onClick:l[3]||(l[3]=e=>L.value=!1)},{default:g((()=>[m(y(f(P)("general.cancel")),1)])),_:1}),v(r,{size:"small",type:"primary",onClick:F},{default:g((()=>[m(y(f(P)("general.confirm")),1)])),_:1})])])),_:1},8,["visible"])]),v(K,{ref:"multipleTable",data:D.value,style:{width:"100%"},"tooltip-effect":"dark","row-key":"ID",onSelectionChange:W},{default:g((()=>[v(n,{align:"left",type:"selection",width:"55"}),v(n,{align:"left",label:f(P)("view.operation.sysOperationRecord.operator"),width:"140"},{default:g((e=>[c("div",null,y(e.row.user.userName)+"("+y(e.row.user.nickName)+")",1)])),_:1},8,["label"]),v(n,{align:"left",label:f(P)("general.createdAt"),width:"180"},{default:g((e=>[m(y(f(w)(e.row.CreatedAt)),1)])),_:1},8,["label"]),v(n,{align:"left",label:f(P)("view.operation.sysOperationRecord.statusCode"),prop:"status",width:"120"},{default:g((e=>[c("div",null,[v(s,{type:"success"},{default:g((()=>[m(y(e.row.status),1)])),_:2},1024)])])),_:1},8,["label"]),v(n,{align:"left",label:f(P)("view.operation.sysOperationRecord.requestIP"),prop:"ip",width:"120"},null,8,["label"]),v(n,{align:"left",label:f(P)("view.operation.sysOperationRecord.requestMethod"),prop:"method",width:"140"},null,8,["label"]),v(n,{align:"left",label:f(P)("view.operation.sysOperationRecord.requestPath"),prop:"path",width:"240"},null,8,["label"]),v(n,{align:"left",label:f(P)("general.request"),prop:"path",width:"80"},{default:g((e=>[c("div",null,[e.row.body?(d(),h(i,{key:0,placement:"left-start",trigger:"click"},{reference:g((()=>[v(J,{style:{cursor:"pointer"}},{default:g((()=>[v(b)])),_:1})])),default:g((()=>[c("div",R,[c("pre",null,y(H(e.row.body)),1)])])),_:2},1024)):(d(),p("span",x,y(f(P)("view.operation.sysOperationRecord.none")),1))])])),_:1},8,["label"]),v(n,{align:"left",label:f(P)("view.operation.sysOperationRecord.response"),prop:"path",width:"100"},{default:g((e=>[c("div",null,[e.row.resp?(d(),h(i,{key:0,placement:"left-start",trigger:"click"},{reference:g((()=>[v(J,{style:{cursor:"pointer"}},{default:g((()=>[v(b)])),_:1})])),default:g((()=>[c("div",z,[c("pre",null,y(H(e.row.resp)),1)])])),_:2},1024)):(d(),p("span",S,y(f(P)("view.operation.sysOperationRecord.none")),1))])])),_:1},8,["label"]),v(n,{align:"left",label:f(P)("general.operations")},{default:g((e=>[v(i,{visible:e.row.visible,"onUpdate:visible":l=>e.row.visible=l,placement:"top",width:"160"},{reference:g((()=>[v(r,{icon:"delete",size:"small",type:"text",onClick:l=>e.row.visible=!0},{default:g((()=>[m(y(f(P)("general.delete")),1)])),_:2},1032,["onClick"])])),default:g((()=>[c("p",null,y(f(P)("general.deleteConfirm")),1),c("div",j,[v(r,{size:"small",type:"text",onClick:l=>e.row.visible=!1},{default:g((()=>[m(y(f(P)("general.cancel")),1)])),_:2},1032,["onClick"]),v(r,{size:"small",type:"primary",onClick:l=>G(e.row)},{default:g((()=>[m(y(f(P)("general.confirm")),1)])),_:2},1032,["onClick"])])])),_:2},1032,["visible","onUpdate:visible"])])),_:1},8,["label"])])),_:1},8,["data"]),c("div",V,[v(Q,{"current-page":I.value,"page-size":U.value,"page-sizes":[10,30,50,100],total:q.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:B,onSizeChange:M},null,8,["current-page","page-size","total"])])])])}}});export{I as default};
